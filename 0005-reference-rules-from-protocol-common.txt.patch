From fb74be9f07f0d0f6a34ab14140cc70b5ee58af36 Mon Sep 17 00:00:00 2001
From: Tay Ray Chuan <rctay89@gmail.com>
Date: Thu, 29 Aug 2013 17:41:56 +0800
Subject: [PATCH 05/19] reference rules from protocol-common.txt

---
 Documentation/technical/http-protocol.txt | 28 ++++++++++++----------------
 1 file changed, 12 insertions(+), 16 deletions(-)

diff --git a/Documentation/technical/http-protocol.txt b/Documentation/technical/http-protocol.txt
index ff91bb0..2499dda 100644
--- a/Documentation/technical/http-protocol.txt
+++ b/Documentation/technical/http-protocol.txt
@@ -194,11 +194,9 @@ the default ref named 'HEAD'.
   info_refs        =  *( ref_record )
   ref_record       =  any_ref / peeled_ref
 
-  any_ref          =  id HTAB name LF
-  peeled_ref       =  id HTAB name LF
-		      id HTAB name "^{}" LF
-  id               =  40*HEX
-
+  any_ref          =  obj-id HTAB refname LF
+  peeled_ref       =  obj-id HTAB refname LF
+		      obj-id HTAB refname "^{}" LF
 
 Smart Clients
 ~~~~~~~~~~~~~
@@ -287,19 +285,17 @@ declarations behind a NUL on the first ref.
 		      "0000"
   ref_list         =  empty_list / non_empty_list
 
-  empty_list       =  PKT-LINE(id SP "capabilities^{}" NUL cap_list LF)
+  empty_list       =  PKT-LINE(obj-id SP "capabilities^{}" NUL cap_list LF)
 
-  non_empty_list   =  PKT-LINE(id SP name NUL cap_list LF)
+  non_empty_list   =  PKT-LINE(obj-id SP name NUL cap_list LF)
 		      *ref_record
 
   cap_list         =  *(SP capability) SP
   ref_record       =  any_ref / peeled_ref
 
-  any_ref          =  PKT-LINE(id SP name LF)
-  peeled_ref       =  PKT-LINE(id SP name LF)
-		      PKT-LINE(id SP name "^{}" LF
-  id               =  40*HEX
-
+  any_ref          =  PKT-LINE(obj-id SP name LF)
+  peeled_ref       =  PKT-LINE(obj-id SP name LF)
+		      PKT-LINE(obj-id SP name "^{}" LF
 
 Smart Service git-upload-pack
 ------------------------------
@@ -346,8 +342,8 @@ appear in the response obtained through ref discovery.
   have_list        =  *PKT-LINE("have" SP id LF)
 
   command          =  create / delete / update
-  create           =  40*"0" SP new_id SP name
-  delete           =  old_id SP 40*"0" SP name
+  create           =  zero-id SP new_id SP name
+  delete           =  old_id SP zero-id SP name
   update           =  old_id SP new_id SP name
 
 TODO: Document this further.
@@ -523,8 +519,8 @@ the id obtained through ref discovery as old_id.
   cap_list         =  *(SP capability) SP
 
   command          =  create / delete / update
-  create           =  40*"0" SP new_id SP name
-  delete           =  old_id SP 40*"0" SP name
+  create           =  zero-id SP new_id SP name
+  delete           =  old_id SP zero-id SP name
   update           =  old_id SP new_id SP name
 
 TODO: Document this further.
-- 
1.8.4.rc4.527.g303b16c

