From 425eb6cd3c5c745599d1a7c5059ee724a7883796 Mon Sep 17 00:00:00 2001
From: Tay Ray Chuan <rctay89@gmail.com>
Date: Thu, 8 Apr 2010 01:17:09 +0800
Subject: [PATCH 18/22] also mention locations matched by $GIT_URL for 404s

---

Junio's suggested text was not used, but the issue (no object found) was
addressed.

Based on:

  Message-ID: <7vskdss3ei.fsf@alter.siamese.dyndns.org>

  > +General Request Processing
  > +--------------------------
  > +
  > +Except where noted, all standard HTTP behavior SHOULD be assumed
  > +by both client and server.  This includes (but is not necessarily
  > +limited to):
  > +
  > +If there is no repository at $GIT_URL, the server MUST respond with
  > +the '404 Not Found' HTTP status code.

  We may also want to add

      If there is no object at $GIT_URL/some/path, the server MUST respond
      with the '404 Not Found' HTTP status code.

  to help dumb clients.
---
 Documentation/technical/http-protocol.txt | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/Documentation/technical/http-protocol.txt b/Documentation/technical/http-protocol.txt
index 615b41a..3d6b30d 100644
--- a/Documentation/technical/http-protocol.txt
+++ b/Documentation/technical/http-protocol.txt
@@ -103,8 +103,9 @@ Except where noted, all standard HTTP behavior SHOULD be assumed
 by both client and server.  This includes (but is not necessarily
 limited to):
 
-If there is no repository at $GIT_URL, the server MUST NOT respond with
-'200 OK' and a valid info/refs response.  A server SHOULD respond with
+If there is no repository at $GIT_URL, or the resource pointed to by a
+location matching $GIT_URL does not exist, the server MUST NOT respond
+with '200 OK'.  A server SHOULD respond with
 '404 Not Found', '410 Gone', or any other suitable HTTP status code
 which does not imply the resource exists as requested.
 
-- 
1.8.4.rc4.527.g303b16c

